<h1>
    0221
</h1>

<h3>
    이벤트루프
</h3>

자바스크립트의 특징 중 하나는 "단일 스레드"기반의 언어라는 점입니다.

스레드가 하나라는 말은, 곧 동시에 하나의 작업만을 처리할 수 있다라는 말과 같습니다.

하지만 자바스크립트는 여러가지의 일을 동시에 처리하는 것처럼 보입니다.

이때 등장하는 개념이 "이벤트 루프"입니다.

즉, 자바스크립트는 이벤트 루프를 이용해서 비동기 방식으로 동시성을 지원하는 것입니다.



실제로, V8같은 자바스크립트 엔진은 콜스택을 사용하며, 요청이 들어올때마다 해당 요청을 순차적으로 콜스택에 담아서 처리할 뿐입니다.

이때, 비동기 요청은 자바스크립트 엔진을 구동하는 환경, 즉 브라우저나 node.js가 담당합니다.



V8을 비롯한 대부분의 자바스크립트 엔진은 크게 2가지의 영역으로 나뉩니다.

~~~
콜스택
: 작업이 요청되면(함수가 호출되면) 요청된 작업은 순차적으로 콜스택에 쌓이고, 순차적으로 실행됩니다.
자바스크립트는 단 하나의 콜스택을 사용하기에 해당 task가 종료되기 전까지는 다른 어떤 task도 실행될 수 없습니다.
~~~

~~~
힙
: 동적으로 생성된 객체 인스턴스가 할당되는 영역입니다.
~~~

비동기 요청 처리는 자바스크립트 엔진을 구동하는 환경(브라우저나 node.js)는 다음과 같이 구성되어 있습니다.

~~~
이벤트큐
:비동기 처리 함수의 콜백 함수, 비동기식 이벤트 핸들러, timer 함수의 콜백 함수가 보관되는 영역으로, 이벤트 루프에 의해 특정시점(콜스택이 비워졌을 때)에 순차적으로 콜스택으로 이동되어 실행되어집니다.
~~~

~~~
이벤트루프
: 콜스택 내에서 현재 실행중이 task가 있는지, 그리고 이벤트큐에 task가 있는지를 반복하여 확인합니다.
만약 콜스택이 비어져있다면, 이벤트큐 내의 task가 콜스택으로 이동되어 실행되어집니다.
~~~

