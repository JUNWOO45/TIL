# 1104

[DEVIEW 박재성님 발표](https://deview.kr/data/deview/2019/presentation/[225-2]2019년+FE+프레임워크를+배우는+기분(FE+인싸들이라면+알고+있어야+하는+프레임워크+기술들).pdf) : 이건 안보면 안댐..두번보고 세번보기.



# 1107

쿠폰 540개를 만들어야했다.

쿠폰코드를 무작위로 만들어야했고 INSERT를 540번 반복시키기위해 프로시져를 첨 생성해봄ㅇㅇ

```
drop procedure if exists makeCoupons;
DELIMITER //  
CREATE PROCEDURE makeCoupons()   
BEGIN
DECLARE i INT DEFAULT 1; 
WHILE (i <= 540) DO
    INSERT
INTO coupon(sid, name, description, mode, discount_type, status, discount_amount, max_issued, regularity, specialties, start_datetime, end_datetime, terms, code)
VALUES(UUID(), '네임', '실물 쿠폰입니다', 2, 1, 2, 40000, 1, 3, '1|2|3|4|5|6', '2019.11.11', '2020-02-29 23:59:59', '다른 사람과 공유하실 수 없는 쿠폰입니다.', concat(char(round(rand()*25)+65),char(round(rand()*25)+65),char(round(rand()*25)+65),char(round(rand()*25)+65),char(round(rand()*25)+65),char(round(rand()*25)+65)));
    SET i = i+1;
END WHILE;
END;
//  

CALL makeCoupons(); 
```



아름답지는 않지만.. 생성하긴 생성함;

가장 중요한게 code가 중복되면 안된다는 점인데(sid를 UUID()로 생성하기에 이쪽은 절대 중복이 되지않는다고 믿음.),

```
SELECT name, code, count(*)
FROM coupon
GROUP BY code
;
```



그냥 이걸루 확인함.

애초에 쿠폰코드를 생성할때 중복되면 다른 코드를 생성하도록 좀 더 업그레이드 시킬 수 있을듯ㅇㅇ